(window.webpackJsonpedita=window.webpackJsonpedita||[]).push([[0],{1:function(e,t,n){"use strict";function r(e,t){return e.client===t.client?e.clock===t.clock?0:e.clock<t.clock?-1:1:e.client<t.client?-1:1}function i(e,t){return-1===r(e,t)}function u(e,t){return 0===r(e,t)}n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return a}));var c={client:-1,clock:0},a={client:-1,clock:1}},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),i=n(10),u=n(1),c=n(3),a=function(){function e(t){Object(r.a)(this,e),this.chars=void 0,this.chars=t}return Object(i.a)(e,[{key:"value",value:function(){return this.chars.filter((function(e){return e.visible})).map((function(e){return e.value})).join("")}},{key:"length",value:function(){return this.chars.filter((function(e){return e.visible})).length}},{key:"atVisible",value:function(e){for(var t=0;t<this.chars.length;t++)if(this.chars[t].visible){if(0===e)return this.chars[t];e-=1}return c.b}},{key:"getIndexById",value:function(e){var t=this.chars.findIndex((function(t){return u.b(t.id,e)}));return-1===t?null:t}},{key:"insert",value:function(e){if(null!=this.getIndexById(e.id))return!0;var t=this.getIndexById(e.prev),n=this.getIndexById(e.next);if(null==t||null==n)return!1;for(var r=t+1;r<=n;r++)if(u.d(e.id,this.chars[r].id))return this.chars.splice(r,0,e),!0;return this.chars.splice(n,0,e),!0}},{key:"delete",value:function(e){var t=this.getIndexById(e.id);return null!=t&&(this.chars[t].visible=!1,!0)}}],[{key:"empty",value:function(){return new e([c.a,c.b])}}]),e}()},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var r=n(1),i={id:r.a,prev:r.a,next:r.c,visible:!1,value:""},u={id:r.c,prev:r.a,next:r.c,visible:!1,value:""}},34:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(9),i=n(10),u=n(3),c=n(17),a=function(){function t(e,n){Object(r.a)(this,t),this.buffer=void 0,this.subscribers=[],this.clientId=void 0,this.localClock=0,this.queue=[],this.buffer=n?new c.a(n):c.a.empty(),this.clientId=e}return Object(i.a)(t,[{key:"setText",value:function(t){for(var n=this,r=0;r<t.length;r++){var i=this.makeInsert(r,t[r]);this.buffer.insert(i.char)}e((function(){n.broadcastValue()}))}},{key:"onValue",value:function(e){this.subscribers.push({type:"value",handler:e})}},{key:"onOperation",value:function(e){this.subscribers.push({type:"operation",handler:e})}},{key:"broadcastOperation",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,u=this.subscribers[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var c=i.value;"operation"===c.type&&c.handler(e)}}catch(a){n=!0,r=a}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}}},{key:"broadcastValue",value:function(){var e=this.value(),t=!0,n=!1,r=void 0;try{for(var i,u=this.subscribers[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var c=i.value;"value"===c.type&&c.handler(e)}}catch(a){n=!0,r=a}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}}},{key:"processQueue",value:function(){var e;do{e=this.queue.length;for(var t=0;t<this.queue.length;t++)this.processOperation(this.queue[t])&&(this.queue.splice(t,1),t-=1)}while(this.queue.length<e)}},{key:"processOperation",value:function(e){switch(e.type){case"insert":return this.buffer.insert(e.char);case"delete":return this.buffer.delete(e.char)}}},{key:"apply",value:function(e){this.queue.unshift(e),this.processQueue(),this.broadcastValue()}},{key:"makeInsert",value:function(e,t){var n=0===e?u.a:this.buffer.atVisible(e-1),r=e===this.buffer.length()?u.b:this.buffer.atVisible(e);return{type:"insert",char:{id:{client:this.clientId,clock:this.localClock++},prev:n.id,next:r.id,visible:!0,value:t}}}},{key:"makeDelete",value:function(e){return{type:"delete",char:this.buffer.atVisible(e)}}},{key:"insert",value:function(e,t){var n=this.makeInsert(e,t);this.buffer.insert(n.char),this.broadcastOperation(n),this.broadcastValue()}},{key:"delete",value:function(e){var t=this.makeDelete(e);this.buffer.delete(t.char),this.broadcastOperation(t),this.broadcastValue()}},{key:"value",value:function(){return this.buffer.value()}}]),t}();window.Client=a}).call(this,n(71).setImmediate)},35:function(e,t,n){e.exports=n(73)},68:function(e,t){},73:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(0),u=n(32),c=n(33),a=n.n(c),s=n(34);function l(e){var t=e.value,n=e.onInsert,u=e.onDelete,c=i.useState(0),a=Object(r.a)(c,2),s=a[0],l=a[1];return i.useEffect((function(){s>t.length&&l(t.length),s<0&&l(0)}),[t,s]),i.useEffect((function(){function e(e){e.preventDefault(),"Backspace"===e.key?(u(s-1,1),l(s-1)):"ArrowLeft"===e.key?l((function(e){return e-1})):"ArrowRight"===e.key?l((function(e){return e+1})):1===e.key.length&&(n(s,e.key),l(s+1))}return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[u,n,s]),i.createElement("div",null,i.createElement("span",{style:{whiteSpace:"pre"}},t.slice(0,s)),i.createElement("span",null,"_"),i.createElement("span",{style:{whiteSpace:"pre"}},t.slice(s)))}function o(e){var t=e.server,n=e.clientId,u=e.chars,c=i.useRef(new s.a(n,u)),a=i.useState(c.current.value()),o=Object(r.a)(a,2),f=o[0],h=o[1];i.useEffect((function(){t.on("op",(function(e){c.current.apply(e)})),t.on("get-chars",(function(){t.emit("get-chars",c.current.buffer.chars)})),c.current.onOperation((function(e){return t.emit("op",e)})),c.current.onValue(h)}),[]);var v=i.useCallback((function(e,t){c.current.insert(e,t)}),[]),d=i.useCallback((function(e,t){c.current.delete(e)}),[]);return i.createElement(l,{value:f,onInsert:v,onDelete:d})}u.render(i.createElement((function(){var e=i.useRef(),t=i.useState(null),n=Object(r.a)(t,2),u=n[0],c=n[1];return i.useEffect((function(){e.current=a()("http://51.15.42.84:3001"),e.current.on("init",c)}),[]),null==u||null==e.current?i.createElement("div",null,"connecting..."):i.createElement(o,{clientId:u.clientId,server:e.current,chars:u.chars})}),null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.57b20857.chunk.js.map